<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora TISS - Gesti√≥n de UTI</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Disclaimer Principal -->
        <div class="disclaimer-header">
            <div class="warning-icon">‚ö†Ô∏è</div>
            <div class="disclaimer-text">
                <strong>HERRAMIENTA INFORMATIVA</strong>
                <p>Esta aplicaci√≥n NO toma decisiones operativas. Los datos mostrados son referenciales. Las decisiones finales sobre dotaci√≥n de personal corresponden exclusivamente a la jefatura y coordinaci√≥n de Enfermeria.</p>
            </div>
        </div>

        <header>
            <h1>Gesti√≥n TISS - UTI 22 Camas</h1>
            <p class="subtitle">Sistema de Puntuaci√≥n de Intervenciones Terap√©uticas</p>
            <div class="header-controls">
                <div class="turno-selector">
                    <label for="turnoSelect">‚è∞ Turno:</label>
                    <select id="turnoSelect">
                        <option value="ma√±ana">Ma√±ana (7-14hs)</option>
                        <option value="tarde">Tarde (14-21hs)</option>
                        <option value="noche">Nochede enfermer√≠a y direcci√≥n m√©dica (21-07hs)</option>
                        <option value="franquero">Franquero (7-21hs)</option>
                    </select>
                </div>
                <div class="enfermeros-input">
                    <label for="enfermerosEnTurno">üë• Enfermeros en turno:</label>
                    <input type="number" id="enfermerosEnTurno" min="0" max="30" value="0" />
                </div>
            </div>
        </header>

        <!-- Resumen Global -->
        <div class="global-summary">
            <div class="summary-card">
                <div class="summary-icon">üõèÔ∏è</div>
                <div class="summary-content">
                    <div class="summary-value" id="camasOcupadas">0</div>
                    <div class="summary-label">Camas Ocupadas</div>
                </div>
            </div>
            <div class="summary-card">
                <div class="summary-icon">üìä</div>
                <div class="summary-content">
                    <div class="summary-value" id="tissTotal">0</div>
                    <div class="summary-label">TISS Total</div>
                </div>
            </div>
            <div class="summary-card highlight">
                <div class="summary-icon">üë©‚Äç‚öïÔ∏è</div>
                <div class="summary-content">
                    <div class="summary-value">
                        <span id="enfermerosEnTurnoDisplay">0</span> / <span id="enfermerosNecesarios">0</span>
                    </div>
                    <div class="summary-label">Enfermeros: En Turno / Necesarios</div>
                    <div class="summary-info" id="diferenciaNota"></div>
                </div>
            </div>
            <div class="summary-card">
                <div class="summary-icon">üìà</div>
                <div class="summary-content">
                    <div class="summary-value" id="tissPromedio">0</div>
                    <div class="summary-label">TISS Promedio</div>
                </div>
            </div>
        </div>

        <!-- Notas del Turno -->
        <div class="notas-turno-section">
            <label for="notasTurno">üìù Notas del Turno:</label>
            <textarea id="notasTurno" placeholder="Observaciones generales del turno, cambios importantes, situaciones especiales..."></textarea>
        </div>

        <!-- Mapa de Camas -->
        <div class="beds-section">
            <div class="section-header">
                <h2>Mapa de Camas UTI</h2>
                <div class="section-actions">
                    <button id="verListaBtn" class="btn-primary-small">üìã Ver Lista</button>
                    <button id="imprimirBtn" class="btn-primary-small">üñ®Ô∏è Imprimir</button>
                    <button id="limpiarTodoBtn" class="btn-secondary-small">üóëÔ∏è Limpiar Todo</button>
                </div>
            </div>
            
            <div class="beds-grid" id="bedsGrid">
                <!-- Se generar√° din√°micamente con JavaScript -->
            </div>

            <div class="legend">
                <div class="legend-item">
                    <span class="legend-color empty"></span>
                    <span>Vac√≠a</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color clase1"></span>
                    <span>Clase I (< 10)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color clase2"></span>
                    <span>Clase II (10-19)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color clase3"></span>
                    <span>Clase III (20-39)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color clase4"></span>
                    <span>Clase IV (‚â• 40)</span>
                </div>
            </div>
        </div>

        <!-- Distribuci√≥n por Clases -->
        <div class="distribution-section">
            <h2>Distribuci√≥n de Pacientes por Clase</h2>
            <div class="distribution-grid">
                <div class="distribution-card class-1">
                    <h3>Clase I</h3>
                    <div class="distribution-count" id="countClase1">0</div>
                    <p>< 10 puntos</p>
                    <p class="ratio-text">Ratio: 1:4</p>
                </div>
                <div class="distribution-card class-2">
                    <h3>Clase II</h3>
                    <div class="distribution-count" id="countClase2">0</div>
                    <p>10-19 puntos</p>
                    <p class="ratio-text">Ratio: 1:4</p>
                </div>
                <div class="distribution-card class-3">
                    <h3>Clase III</h3>
                    <div class="distribution-count" id="countClase3">0</div>
                    <p>20-39 puntos</p>
                    <p class="ratio-text">Ratio: 2:1</p>
                </div>
                <div class="distribution-card class-4">
                    <h3>Clase IV</h3>
                    <div class="distribution-count" id="countClase4">0</div>
                    <p>‚â• 40 puntos</p>
                    <p class="ratio-text">Ratio: 1:1</p>
                </div>
            </div>
        </div>

        <!-- Modal para editar paciente -->
        <div id="patientModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">Cama #1</h2>
                    <button class="modal-close" id="closeModal">&times;</button>
                </div>
                
                <div class="modal-body">
                    <!-- Panel de Selecci√≥n -->
                    <div class="selection-panel-modal">
                        <div class="patient-info">
                            <div class="info-row">
                                <label class="info-field">
                                    <span>Nombre del Paciente:</span>
                                    <input type="text" id="patientName" placeholder="Ej: Juan P√©rez">
                                </label>
                                <label class="info-field">
                                    <span>Fecha de Ingreso:</span>
                                    <input type="date" id="fechaIngreso">
                                </label>
                            </div>
                            <label class="info-field">
                                <span>Diagn√≥stico:</span>
                                <input type="text" id="diagnostico" placeholder="Ej: Sepsis severa, IAM, EPOC descompensado">
                            </label>
                            <label class="info-field">
                                <span>Observaciones:</span>
                                <textarea id="observaciones" placeholder="Notas adicionales, alergias, evoluci√≥n..." rows="3"></textarea>
                            </label>
                        </div>

                        <h3>Seleccione las Intervenciones del Paciente</h3>
                        
                        <!-- Tabs de Categor√≠as -->
                        <div class="tabs-container">
                            <div class="tabs-navigation">
                                <button class="tab-btn active" data-tab="basicas">Actividades B√°sicas</button>
                                <button class="tab-btn" data-tab="ventilatorio">Soporte Ventilatorio</button>
                                <button class="tab-btn" data-tab="renal">Soporte Renal</button>
                                <button class="tab-btn" data-tab="neurologico">Soporte Neurol√≥gico</button>
                                <button class="tab-btn" data-tab="metabolico">Soporte Metab√≥lico</button>
                                <button class="tab-btn" data-tab="cardiovascular">Soporte Cardiovascular</button>
                                <button class="tab-btn" data-tab="intervenciones">Intervenciones Espec√≠ficas</button>
                            </div>
                            
                            <div class="tabs-content">
                                <!-- Actividades B√°sicas -->                                <div class="tab-panel active" data-tab="basicas">
                                    <h4 class="tab-panel-title">Actividades B√°sicas</h4>
                                    <div class="items-vertical">
                                        <label class="item">
                                            <input type="checkbox" data-points="5" data-category="basicas">
                                            <span class="item-text">Monitorizaci√≥n est√°ndar (constantes horarias, registro y c√°lculo de balance de l√≠quidos)</span>
                                            <span class="points">5 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="3" data-category="basicas">
                                            <span class="item-text">M√∫ltiples medicamentos intravenosos</span>
                                            <span class="points">3 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="3" data-category="basicas">
                                            <span class="item-text">Cuidados de drenajes excepto SNG</span>
                                            <span class="points">3 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="2" data-category="basicas">
                                            <span class="item-text">Medicaci√≥n √∫nica (EV, VO o IM, SC, o por SNG)</span>
                                            <span class="points">2 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="1" data-category="basicas">
                                            <span class="item-text">Cambio de ropa frecuentes (al menos una vez cada turno)</span>
                                            <span class="points">1 pt</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="1" data-category="basicas">
                                            <span class="item-text">Laboratorios, determinaciones bioqu√≠micas y microbiol√≥gicas</span>
                                            <span class="points">1 pt</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="1" data-category="basicas">
                                            <span class="item-text">Cambio de ropa de rutina. Cuidados y prevenci√≥n de LPP</span>
                                            <span class="points">1 pt</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Soporte Ventilatorio -->
                                <div class="tab-panel" data-tab="ventilatorio">
                                    <h4 class="tab-panel-title">Soporte Ventilatorio</h4>
                                    <div class="items-vertical">
                                        <label class="item">
                                            <input type="checkbox" data-points="5" data-category="ventilatorio">
                                            <span class="item-text">Soporte ventilatorio (con o sin PEEP, con o sin relajante muscular)</span>
                                            <span class="points">5 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="2" data-category="ventilatorio">
                                            <span class="item-text">Ventilaci√≥n suplementaria (respiraci√≥n espont√°nea a trav√©s de tubo traqueal sin PEEP, ox√≠geno suplementario)</span>
                                            <span class="points">2 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="1" data-category="ventilatorio">
                                            <span class="item-text">Cuidado de la v√≠a a√©rea artificial</span>
                                            <span class="points">1 pt</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="1" data-category="ventilatorio">
                                            <span class="item-text">Tratamiento para mejorar la funci√≥n pulmonar</span>
                                            <span class="points">1 pt</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Soporte Renal -->
                                <div class="tab-panel" data-tab="renal">
                                    <h4 class="tab-panel-title">Soporte Renal</h4>
                                    <div class="items-vertical">
                                        <label class="item">
                                            <input type="checkbox" data-points="3" data-category="renal">
                                            <span class="item-text">T√©cnicas de hemofiltraci√≥n</span>
                                            <span class="points">3 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="3" data-category="renal">
                                            <span class="item-text">Diuresis activa (furosemida > 0,5 ml/kg/d)</span>
                                            <span class="points">3 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="2" data-category="renal">
                                            <span class="item-text">Medicaci√≥n cuantitativa de la diuresis</span>
                                            <span class="points">2 pts</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Soporte Neurol√≥gico -->
                                <div class="tab-panel" data-tab="neurologico">
                                    <h4 class="tab-panel-title">Soporte Neurol√≥gico</h4>
                                    <div class="items-vertical">
                                        <label class="item">
                                            <input type="checkbox" data-points="4" data-category="neurologico">
                                            <span class="item-text">Medici√≥n de la presi√≥n intracraneal</span>
                                            <span class="points">4 pts</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Soporte Metab√≥lico -->
                                <div class="tab-panel" data-tab="metabolico">
                                    <h4 class="tab-panel-title">Soporte Metab√≥lico</h4>
                                    <div class="items-vertical">
                                        <label class="item">
                                            <input type="checkbox" data-points="4" data-category="metabolico">
                                            <span class="item-text">Tratamiento de acidosis o alcalosis metab√≥lica complicada</span>
                                            <span class="points">4 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="3" data-category="metabolico">
                                            <span class="item-text">Alimentaci√≥n parenteral</span>
                                            <span class="points">3 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="2" data-category="metabolico">
                                            <span class="item-text">Alimentaci√≥n enteral a trav√©s de SNG o cualquier otra sonda gastro</span>
                                            <span class="points">2 pts</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Soporte Cardiovascular -->
                                <div class="tab-panel" data-tab="cardiovascular">
                                    <h4 class="tab-panel-title">Soporte Cardiovascular</h4>
                                    <div class="items-vertical">
                                        <label class="item">
                                            <input type="checkbox" data-points="8" data-category="cardiovascular">
                                            <span class="item-text">Swan Ganz</span>
                                            <span class="points">8 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="5" data-category="cardiovascular">
                                            <span class="item-text">TAM (Tensi√≥n Arterial Media)</span>
                                            <span class="points">5 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="4" data-category="cardiovascular">
                                            <span class="item-text">M√∫ltiples f√°rmacos vasoactivos</span>
                                            <span class="points">4 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="3" data-category="cardiovascular">
                                            <span class="item-text">Un solo f√°rmaco vasoactivo</span>
                                            <span class="points">3 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="4" data-category="cardiovascular">
                                            <span class="item-text">Reemplazo intravenoso de grandes cantidades de l√≠quidos (> 3 L/m¬≤ por d√≠a)</span>
                                            <span class="points">4 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="3" data-category="cardiovascular">
                                            <span class="item-text">RCP en las √∫ltimas 24 hs</span>
                                            <span class="points">3 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="2" data-category="cardiovascular">
                                            <span class="item-text">Cat√©ter venoso central</span>
                                            <span class="points">2 pts</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Intervenciones Espec√≠ficas -->
                                <div class="tab-panel" data-tab="intervenciones">
                                    <h4 class="tab-panel-title">Intervenciones Espec√≠ficas</h4>
                                    <div class="items-vertical">
                                        <label class="item">
                                            <input type="checkbox" data-points="3" data-category="intervenciones">
                                            <span class="item-text">Intubaci√≥n, introducci√≥n de MCP, cardioversi√≥n, endoscop√≠as, cirug√≠a de urgencias, lavado g√°strico, RX, ecocardiogramas</span>
                                            <span class="points">3 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="5" data-category="intervenciones">
                                            <span class="item-text">M√∫ltiples intervenciones en UTI (que no se describen)</span>
                                            <span class="points">5 pts</span>
                                        </label>
                                        <label class="item">
                                            <input type="checkbox" data-points="5" data-category="intervenciones">
                                            <span class="item-text">Intervenciones fuera de la UTI (cirug√≠a, procedimientos, traslados a hospitales)</span>
                                            <span class="points">5 pts</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel de Resultados del Modal -->
                    <div class="results-panel-modal" id="resultsPanel">
                        <h3>Resultado TISS</h3>
                        
                        <div class="score-display-modal" id="scoreDisplay">
                            <div class="score-number" id="scoreNumber">0</div>
                            <div class="score-label">Puntos TISS</div>
                        </div>

                        <div class="classification-modal" id="classification">
                            <p style="text-align: center; color: #6b7280;">Seleccione intervenciones para ver la clasificaci√≥n</p>
                        </div>
                        
                        <div class="action-buttons-modal">
                            <button id="guardarPacienteBtn" class="btn-primary">üíæ Guardar</button>
                            <button id="liberarCamaBtn" class="btn-danger">üóëÔ∏è Liberar</button>
                            <button id="cancelarBtn" class="btn-secondary">Cancelar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Sistema TISS - Therapeutic Intervention Scoring System | UTI 22 Camas</p>
            <p class="footer-note">Herramienta de apoyo informativo. No sustituye el criterio profesional.</p>
        </footer>
    </div>

    <!-- Modal Lista de Pacientes -->
    <div class="modal" id="listaModal">
        <div class="modal-content modal-lista">
            <div class="modal-header">
                <h2>üìã Lista de Pacientes - <span id="listaTurno"></span></h2>
                <button class="close-btn" id="closeListaModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="listaContenido"></div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
